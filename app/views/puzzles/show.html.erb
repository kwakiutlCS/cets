<h2><%= @puzzle.title %></h2>


<script>
    $(document).ready(function() {
    
    chessBoard.startChessBoard({player:"<%= @side %>", size: 400,  fen:"<%= @instance.fen %>", type:"<%= @puzzle.puzzle_type %>", lines:<%= raw(@instance.lines) %> });
    

    });

    var updatePageAfterChessBoardMove = function() {
        if (chessBoard.lines === "solved") {
            $("#moveResult").text("Puzzle solved");
            $.ajax('/puzzles/solved',{
                type: "POST",
                data: {"puzzle_id":<%= @puzzle.id %>, "result": 1}
            });
    

        }
        if (chessBoard.lines === "failed") {
            $("#moveResult").text("Puzzle failed");
            $.ajax('/puzzles/solved',{
                type: "POST",
                data: {"puzzle_id":<%= @puzzle.id %>, "result": 0}
            });
        }
    
    }

</script>

<div id="chessBoardHolder"></div>
<div id="moveResult"></div>
